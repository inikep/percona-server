INSERT INTO t1 (f1) VALUES (DEFAULT);
SELECT f1 = 'A', f1017 = 'A' FROM t1;
f1 = 'A'	f1017 = 'A'
1	1
UPDATE t1 SET f1 = 'X', f1017 = 'X' ;
SELECT f1 = 'X', f1017 = 'X' FROM t1 WHERE f1 = 'X' AND f1017 = 'X';
f1 = 'X'	f1017 = 'X'
1	1
SET AUTOCOMMIT=OFF;
START TRANSACTION;
UPDATE t1 SET f2 = 'K' WHERE f1 = 'X' AND f1017 = 'X';
SET AUTOCOMMIT=OFF;
START TRANSACTION;
UPDATE t1 SET f2 = 'C' WHERE f1 = 'X' AND f1017 = 'X';
COMMIT;
COMMIT;
ERROR 40001: Deadlock found when trying to get lock; try restarting transaction
ROLLBACK;
ROLLBACK;
START TRANSACTION;
INSERT INTO t1 (f1, f1017) VALUES ('B','B');
INSERT INTO t1 (f1, f1017) VALUES ('C','C');
INSERT INTO t1 (f1, f1017) VALUES ('E','E');
INSERT INTO t1 (f1, f1017) VALUES ('F','F');
ROLLBACK;
SELECT COUNT(*) = 1 FROM t1;
COUNT(*) = 1
1
SELECT COUNT(*) = 1 FROM t1;
COUNT(*) = 1
1
DROP TABLE t1;
