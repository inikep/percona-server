SET @old_log_output= @@log_output;
SET GLOBAL log_output= 'TABLE';
TRUNCATE mysql.general_log;
SET @old_log_output= @@log_output;
SET GLOBAL log_output= 'TABLE';
TRUNCATE mysql.general_log;
SET SESSION wsrep_osu_method=TOI;
CREATE TABLE t1 (f1 INTEGER) ENGINE=InnoDB;
SET SESSION wsrep_osu_method=RSU;
ALTER TABLE t1 ADD COLUMN f2 INTEGER;
SET SESSION wsrep_osu_method=TOI;
SELECT COUNT(*) = 1 FROM mysql.general_log WHERE argument LIKE 'CREATE%' AND command_type != 'Prepare';
COUNT(*) = 1
1
SELECT COUNT(*) = 1 FROM mysql.general_log WHERE argument LIKE 'ALTER%' AND command_type != 'Prepare';
COUNT(*) = 1
1
SELECT COUNT(*) = 0 FROM mysql.general_log WHERE argument NOT LIKE 'SELECT%';
COUNT(*) = 0
1
DROP TABLE t1;
SET GLOBAL log_output= @old_log_output;
TRUNCATE mysql.general_log;
SET GLOBAL log_output= @old_log_output;
TRUNCATE mysql.general_log;
CALL mtr.add_suppression("Although a path was specified for the --general-log-file option, log tables are used. To enable logging to files use the --log-output=file option.");
CALL mtr.add_suppression("Although a path was specified for the --slow-query-log-file option, log tables are used. To enable logging to files use the --log-output=file option.");
