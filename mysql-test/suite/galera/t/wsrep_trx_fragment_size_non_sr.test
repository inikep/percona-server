-- source include/galera_cluster.inc

--let $sr = `SELECT variable_value LIKE '%:STREAMING:%' FROM performance_schema.session_status WHERE variable_name = 'wsrep_provider_capabilities'`

if ($sr)
{
  -- skip The test requires a wsrep provider that does not support streaming replication.
}

SELECT variable_value FROM performance_schema.session_variables
WHERE variable_name = 'wsrep_trx_fragment_size';

SET SESSION wsrep_trx_fragment_size = 0;
-- error ER_WRONG_VALUE_FOR_VAR
SET SESSION wsrep_trx_fragment_size = 123;
SHOW WARNINGS;

SELECT variable_value FROM performance_schema.global_variables
WHERE variable_name = 'wsrep_trx_fragment_size';

SET GLOBAL wsrep_trx_fragment_size = 0;
-- error ER_WRONG_VALUE_FOR_VAR
SET GLOBAL wsrep_trx_fragment_size = 123;
SHOW WARNINGS;

SET GLOBAL wsrep_trx_fragment_size = default;
