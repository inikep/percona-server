#
# GCF-841 DROP TEMPORARY TABLE rewriting causes binlogs to diverge
#

--source include/galera_cluster.inc
--source include/have_binlog_format_row.inc

--connection node_1
CREATE TEMPORARY TABLE t1 (f1 INTEGER) ENGINE=InnoDB;
CREATE TABLE t1 (f1 INTEGER) ENGINE=InnoDB;
CREATE TEMPORARY TABLE t2 (f1 INTEGER) ENGINE=InnoDB;
CREATE TABLE t3 (f1 INTEGER) ENGINE=InnoDB;
DROP TABLE t1, t2, t3;

--connection node_2
--let $gtid_executed_node2 = `SELECT @@global.gtid_executed;`

--connection node_1
# Node 1 has extra GTID set generated by the temporary table drop
--disable_query_log
--eval SELECT GTID_SUBSET('$gtid_executed_node2', @@global.gtid_executed) AS gtid_executed_equal;
--enable_query_log

DROP TABLE t1;
