--echo #
--echo # PS-5772 8.0.16 encryption reconciliation
--echo # Check if explicit ENCRYPTION='N' is always shown in SHOW CREATE TABLE
--echo # for innodb_file_per_table tables. It should not be printed for any
--echo # different table (in general or system tablespace). Please note we test
--echo # explicit ENCRYPTION='N' and not the rules of printing this clause in
--echo # SHOW CREATE TABLE according to WL#12261.
--echo #

CREATE TABLE t1 (a INT) ENCRYPTION='N';
SHOW CREATE TABLE t1;
DROP TABLE t1;
CREATE TABLE t1 (a INT);
SHOW CREATE TABLE t1;
ALTER TABLE t1 ENCRYPTION='N';
SHOW CREATE TABLE t1;
DROP TABLE t1;

CREATE TABLESPACE ts1;
CREATE TABLE t1 (a INT) TABLESPACE=ts1 ENCRYPTION='N';
SHOW CREATE TABLE t1;
DROP TABLE t1;
DROP TABLESPACE ts1;

CREATE TABLE t1 (a INT) TABLESPACE=innodb_file_per_table ENCRYPTION='N';
SHOW CREATE TABLE t1;
DROP TABLE t1;

# CREATE t1 in system tablespace
SET GLOBAL innodb_file_per_table=0;
CREATE TABLE t1 (a INT) ENCRYPTION='N';
SHOW CREATE TABLE t1;
DROP TABLE t1;

# cleanup:
SET GLOBAL innodb_file_per_table=1;
